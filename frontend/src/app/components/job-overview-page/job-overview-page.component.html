<div class="flex">
  @if (isLoading) {
    <app-indeterminate-progress></app-indeterminate-progress>
  }
  <h2>{{ 'ROUTES./job-overview' | translate }}</h2>
  <div class="table flex1">
    <div>
      <div class="row header">
        <div class="cell center shrink check-cell"><span class="fa fa-check check"></span></div>
        <div class="cell center">{{ 'JOB_OVERVIEW.COLUMN.ITEM_RANGE' | translate }}</div>
        <div class="cell center">{{ 'JOB_OVERVIEW.COLUMN.START' | translate }}</div>
        <div class="cell center">{{ 'JOB_OVERVIEW.COLUMN.END' | translate }}</div>
      </div>
    </div>
    @for (jobGroup of jobGroups; track jobGroup; let i = $index) {
      <div>
        <div class="row row-title" (click)="expandSwitch($event)">
          <div class="cell center shrink check-cell">
            @if (generateJobTitle(jobGroup)?.start && !generateJobTitle(jobGroup)?.end) {
              <app-spinner [size]="'13px'"></app-spinner>
            }
            @if (generateJobTitle(jobGroup)?.completed) {
              <span class="fa fa-check check"></span>
            }
          </div>
          <div class="cell center">{{ generateJobTitle(jobGroup)?.title }}</div>
          <div class="cell center">{{ generateJobTitle(jobGroup)?.start }}</div>
          <div class="cell center">{{ generateJobTitle(jobGroup)?.end }}</div>
        </div>
        <div class="child">
          @for (job of jobGroup; track job) {
            <div class="row">
              <div class="cell center shrink check-cell">
                @if (job.completed) {
                  <span class="fa fa-check check"></span>
                }
                @if (job.start && !job.end) {
                  <app-spinner [size]="'13px'"></app-spinner>
                }
              </div>
              <div class="cell center">{{ job.range.from }} - {{ job.range.to }}</div>
              <div class="cell center">{{ getTime(job.start) }}</div>
              <div class="cell center">{{ getTime(job.end) }}</div>
            </div>
          }
        </div>
      </div>
    }
  </div>
  <div>
    @if (!isLoading) {
      <button [routerLink]="['/download']" class="abra-button-primary">{{ 'NEXT_TO_DOWNLOAD' | translate }}</button>
    }
  </div>
</div>
